package com.example.tabletsinventory.ui;import android.content.Context;import android.content.Intent;import android.os.Bundle;import android.view.View;import android.widget.Toast;import com.example.tabletsinventory.R;import com.example.tabletsinventory.databinding.ActivityUpdateBinding;import com.google.zxing.integration.android.IntentIntegrator;import com.google.zxing.integration.android.IntentResult;import androidx.appcompat.app.AppCompatActivity;import androidx.databinding.DataBindingUtil;public class UpdateDeviceActivity extends AppCompatActivity {    private static final String TAG = "UpdateDeviceActivity";    private static final int BR_REQUEST_IMEI = 1011;    private static final int QR_REQUEST = 1021;    ActivityUpdateBinding bi;    Context CTX = this;    DatabaseHelper db;    @Override    protected void onCreate(Bundle savedInstanceState) {        super.onCreate(savedInstanceState);        this.setTitle("Update Device");        bi = DataBindingUtil.setContentView(this, R.layout.activity_update);        bi.setCallback(this);        db = new DatabaseHelper(this);    }    public void submit(View v) {        if (validateForm()) {            saveData();            reset();        }    }    public void saveData() {        InventoryUpdate inventoryupdate = new InventoryUpdate();        inventoryupdate.setImei(Long.parseLong(bi.imeiUpdate.getText().toString()));        inventoryupdate.setTag_number(bi.tagnumberUpdate.getText().toString());        inventoryupdate.setDate(bi.entrydateUpdate.getText().toString());        inventoryupdate.setProject_name(bi.projectUpdate.getText().toString());        inventoryupdate.setReceived_from(bi.receivedbyUpdate.getText().toString());        inventoryupdate.setHandedoverby(bi.handedoverbyUpdate.getText().toString());        inventoryupdate.setAccessories(bi.accessoriesUpdate.getText().toString());        inventoryupdate.setLastlocation(bi.lastlocationUpdate.getText().toString());        inventoryupdate.setCurrentlocation(bi.currentlocationUpdate.getText().toString());        inventoryupdate.setRemarks(bi.remarksUpdate.getText().toString());//        db.addDevice(inventoryupdate);        Toast.makeText(this, "Record Saved", Toast.LENGTH_LONG).show();    }    //Reset all fields    public void reset() {        bi.imeiUpdate.setText(null);        bi.tagnumberUpdate.setText(null);        bi.accessoriesUpdate.setText(null);        bi.entrydateUpdate.setText(null);        bi.handedoverbyUpdate.setText(null);        bi.receivedbyUpdate.setText(null);        bi.lastlocationUpdate.setText(null);        bi.currentlocationUpdate.setText(null);        bi.projectUpdate.setText(null);        bi.remarksUpdate.setText(null);    }    private boolean validateForm() {        //  Validate TAG_NUMBER        if (bi.tagnumberUpdate.getText().toString().isEmpty()) {            bi.tagnumberUpdate.setError("Field can't be Empty");            return false;        } else {            bi.tagnumberUpdate.setError(null);        }        //  Validate IMEI        if (bi.imeiUpdate.getText().toString().isEmpty()) {            bi.imeiUpdate.setError("Field can't be Empty");            return false;        } else {            bi.imeiUpdate.setError(null);        }        return true;    }    //QR and Barcode scanner    public void Btnscan(int i) {        IntentIntegrator integrator = new IntentIntegrator(this);        integrator.setPrompt("Scan a sample sticker");        integrator.setCameraId(0);  // Use a specific camera of the device        integrator.setBeepEnabled(true);        integrator.setBarcodeImageEnabled(true);        integrator.setOrientationLocked(true);        if (i == 1) {            integrator.setRequestCode(BR_REQUEST_IMEI);            integrator.setDesiredBarcodeFormats(IntentIntegrator.ALL_CODE_TYPES);        } else {            integrator.setRequestCode(QR_REQUEST);            integrator.setDesiredBarcodeFormats(IntentIntegrator.QR_CODE);        }        integrator.initiateScan();    }    protected void onActivityResult(int requestCode, int resultCode, Intent data) {        if (requestCode != QR_REQUEST && requestCode != BR_REQUEST_IMEI) {            super.onActivityResult(requestCode, resultCode, data);            return;        }        IntentResult result = IntentIntegrator.parseActivityResult(resultCode, data);        if (result.getContents() == null) {            Toast.makeText(this, "Cancelled", Toast.LENGTH_LONG).show();        } else {            if (requestCode == QR_REQUEST) {                InventoryAdd inventoryAdd = db.getInformation(result.getContents());                bi.tagnumberUpdate.setText(inventoryAdd.getTag_number());                bi.imeiUpdate.setText(inventoryAdd.getImei());                bi.receivedbyUpdate.setText(inventoryAdd.getReceived_from());                bi.entrydateUpdate.setText(inventoryAdd.getDate());                bi.projectUpdate.setText(inventoryAdd.getProject_name());                bi.remarksUpdate.setText(inventoryAdd.getRemarks());                bi.lastlocationUpdate.setText(inventoryAdd.getLocation());//                Log.d(TAG, "onActivityResult: data " + inventoryAdd.getTag_number());            } else if (requestCode == BR_REQUEST_IMEI)                bi.imeiUpdate.setText(result.getContents());        }    }}